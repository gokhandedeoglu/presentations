{"version":3,"sources":["compiler_spec.js"],"names":[],"mappings":"AAAA,KAAO,EACL,kBAAiB;AACjB,WAAS;AACT,UAAQ;AACR,UAAQ;AACR,SAAO;AACP,GAAC;AACD,OAAK;AACL,IAAE;AACF,OAAK;AACL,WAAS;AACT,GAAC,CACH,KAAO,oBAAkB,CAAC;AAE1B,KAAO,EAAC,IAAG;AAAG,YAAU;AAAG,IAAE;AAAG,WAAS;AAAG,iBAAe,CAAC,KAAO,iCAA+B,CAAC;AACnG,KAAO,EAAC,IAAG;AAAG,QAAM;AAAG,UAAQ;AAAG,UAAQ,CAAC,KAAO,2BAAyB,CAAC;AAC5E,KAAO,EAAC,cAAa;AAAG,QAAM,CAAC,KAAO,4BAA0B,CAAC;AAEjE,KAAO,EAAC,WAAU;AAAG,cAAY,CAAC,KAAO,sCAAoC,CAAC;AAC9E,KAAO,EAAC,SAAQ,CAAC,KAAO,kCAAgC,CAAC;AACzD,KAAO,EAAC,aAAY,CAAC,KAAO,4CAA0C,CAAC;AACvE,KAAO,EAAC,uBAAsB,CAAC,KAAO,uDAAqD,CAAC;AAC5F,KAAO,EAAC,SAAQ;AAAG,iBAAe;AAAG,SAAO;AAAG,UAAQ,CAAC,KAAO,4CAA0C,CAAC;AAC1G,KAAO,EAAC,cAAa;AAAG,UAAQ,CAAC,KAAO,mCAAiC,CAAC;AAC1E,KAAO,EAAC,QAAO,CAAC,KAAO,yCAAuC,CAAC;AAC/D,KAAO,EAAC,gBAAe,CAAC,KAAO,8CAA4C,CAAC;AAC5E,KAAO,EAAC,gBAAe,CAAC,KAAO,+CAA6C,CAAC;AAC7E,KAAO,EAAC,kBAAiB;AAAG,0BAAwB,CAAC,KAAO,kDAAgD,CAAC;AAC7G,KAAO,EAAC,gBAAe,CAAC,KAAO,gDAA8C,CAAC;AAE9E,KAAO,EAAC,WAAU,CAAC,KAAO,qCAAmC,CAAC;AAC9D,UAAY,UAAQ,CAAA,IAAO,0BAAwB,CAAC;AAEpD,KAAO,SAAS,KAAG,CAAE,AAAD,CAAG;AACrB,SAAO,AAAC,CAAC,UAAS,CAAG,UAAS,AAAD,CAAG;AAC9B,AAAI,MAAA,CAAA,MAAK;AAAG,kBAAU;AAAG,eAAO;AAAG,uBAAe;AAAG,mBAAW,CAAC;AAEjE,aAAS,AAAC,CAAC,CAAC,AAAD,IAAM;AACf,WAAK,EAAI,IAAI,wBAAsB,AAAC,EAAC,CAAC;AACtC,gBAAU,EAAI,IAAI,qBAAmB,AAAC,EAAC,CAAC;AACxC,iBAAW,EAAI,IAAI,0BAAwB,AAAC,EAAC,CAAC;IAChD,CAAC,CAAC;AAEF,WAAS,eAAa,CAAE,oBAAmB,AAAK,CAAG,CAAA,uBAAsB,AAAgB,CAAG;AAC1F,AAAI,QAAA,CAAA,WAAU,EAAI,IAAI,gBAAc,AAAC,EAAC,CAAC;AACvC,aAAO,EAAI,IAAI,aAAW,AAAC,CAAC,oBAAmB,CAAC,CAAC;AACjD,qBAAe,EAAI,IAAI,qBAAmB,AAAC,CAAC,uBAAsB,CAAC,CAAA;AACnE,WAAO,IAAI,YAAU,AAAC,CACpB,MAAK,CACL,IAAI,cAAY,AAAC,EAAC,CAClB,YAAU,CACV,aAAW,CACX,YAAU,CACV,SAAO,CACP,iBAAe,CACjB,CAAC;IACH;AAAA,AAxDJ,SAAK,eAAe,AAAC,8BACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,gBA0CuB,IAAG,IA3CpD,MAAK,YAAuB,AA2CmD,CAAA,IAAG,CAAE,UAAQ,CAAC,AA3C9C,GACE;MAAC,CAAC,CAAC,CAAC;AAyDjD,WAAO,AAAC,CAAC,oBAAmB,CAAG,EAAC,AAAD,IAAM;AAEnC,aAAS,gBAAc,CAAE,QAAO,AAAS,CAA+B;AACtE,kBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,SAAO,CAAC,CAAC;AAChD,AAAI,UAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAAC,CAAC,qBAAoB,AAAC,EAAC,CAAC,CAAG,EAAC,eAAc,AAAC,EAAC,CAAC,CAAC,CAAC;AAC7E,aAAO,CAAA,QAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC1D,eAAK,AAAC,CAAC,QAAO,SAAS,OAAO,CAAC,KAAK,AAAC,CAAC,CAAA,CAAC,CAAC;AACxC,eAAO,CAAA,QAAO,SAAS,CAAE,CAAA,CAAC,CAAC;QAC7B,CAAC,CAAC;MACJ;AAAA,AAnEN,WAAK,eAAe,AAAC,+BACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,kBA2Dc,QAAO,GA3DE;QAAC,CAAC,CAAC,CAAC;AAoE/C,aAAS,iBAAe,CAAE,SAAQ,CAAwC;AACxE,aAAO,CAAA,eAAc,AAAC,CAAC,GAAI,SAAO,AAAC,CAAC;AAAC,eAAK,CAAG,cAAY;AAAG,mBAAS,CAAG,EAAC,SAAQ,CAAC;AAAA,QAAC,CAAC,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC1G,eAAK,AAAC,CAAC,SAAQ,WAAW,OAAO,CAAC,KAAK,AAAC,CAAC,CAAA,CAAC,CAAC;AAC3C,eAAO,CAAA,SAAQ,WAAW,CAAE,CAAA,CAAC,CAAC;QAChC,CAAC,CAAC;MACJ;AAAA,AAEA,OAAC,AAAC,CAAC,6BAA4B,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACxE,sBAAc,AAAC,CAAC,GAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC1E,eAAK,AAAC,CAAC,SAAQ,YAAY,CAAC,QAAQ,AAAC,CAAC,SAAQ,AAAC,CAAC,aAAY,CAAC,CAAC,CAAC;AAC/D,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,oBAAmB,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC/D,sBAAc,AAAC,CAAC,GAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC1E,eAAK,AAAC,CAAC,SAAQ,OAAO,CAAC,QAAQ,AAAC,CAAC,aAAY,CAAC,CAAC;AAC/C,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,2CAA0C,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACtF,mBAAW,gBAAgB,AAAC,CAAC,aAAY,CAAG,iBAAe,CAAC,CAAC;AAC7D,sBAAc,AAAC,CAAC,GAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC1E,eAAK,AAAC,CAAC,SAAQ,OAAO,CAAC,QAAQ,AAAC,CAAC,kCAAiC,CAAC,CAAC;AACpE,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,uCAAsC,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAClF,mBAAW,gBAAgB,AAAC,CAAC,aAAY,CAAG,iBAAe,CAAC,CAAC;AAC7D,sBAAc,AAAC,CAAC,GAAI,SAAO,AAAC,CAAC,CAAC,GAAE,CAAG,gBAAc,CAAC,CAAC,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACzE,eAAK,AAAC,CAAC,SAAQ,OAAO,CAAC,QAAQ,AAAC,CAAC,+CAA8C,CAAC,CAAC;AACjF,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,0BAAyB,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACrE,uBAAe,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,eAAK,AAAC,CAAC,SAAQ,GAAG,CAAC,QAAQ,AAAC,CAAC,SAAQ,AAAC,CAAC,aAAY,CAAC,CAAC,CAAC;AACtD,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,gCAA+B,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC3E,uBAAe,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,eAAK,AAAC,CAAC,SAAQ,SAAS,CAAC,QAAQ,AAAC,CAAC,WAAU,CAAC,CAAC;AAC/C,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,2CAA0C,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACtF,uBAAe,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,eAAK,AAAC,CAAC,SAAQ,KAAK,CAAC,QAAQ,AAAC,CAAC,SAAQ,kBAAkB,eAAe,CAAC,CAAC;AAC1E,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,mDAAkD,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC9F,uBAAe,AAAC,CAAC,6BAA4B,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnE,eAAK,AAAC,CAAC,SAAQ,KAAK,CAAC,QAAQ,AAAC,CAAC,SAAQ,kBAAkB,eAAe,CAAC,CAAC;AAC1E,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,oDAAmD,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC/F,uBAAe,AAAC,CAAC,qBAAoB,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC3D,eAAK,AAAC,CAAC,SAAQ,KAAK,CAAC,QAAQ,AAAC,CAAC,SAAQ,kBAAkB,cAAc,CAAC,CAAC;AACzE,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,qDAAoD,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAChG,uBAAe,AAAC,CAAC,sBAAqB,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC5D,eAAK,AAAC,CAAC,SAAQ,KAAK,CAAC,QAAQ,AAAC,CAAC,SAAQ,kBAAkB,eAAe,CAAC,CAAC;AAC1E,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,oEAAmE,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC/G,uBAAe,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,eAAK,AAAC,CAAC,SAAQ,gBAAgB,CAAC,QAAQ,AAAC,CAAC,IAAG,CAAC,CAAC;AAC/C,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,uEAAsE,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAClH,uBAAe,AAAC,CAAC,sBAAqB,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC5D,eAAK,AAAC,CAAC,SAAQ,gBAAgB,CAAC,QAAQ,AAAC,CAAC,IAAG,CAAC,CAAC;AAC/C,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,wEAAuE,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACnH,uBAAe,AAAC,CAAC,gCAA+B,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACtE,eAAK,AAAC,CAAC,SAAQ,gBAAgB,CAAC,QAAQ,AAAC,CAAC,KAAI,CAAC,CAAC;AAChD,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,6BAA4B,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACxE,uBAAe,AAAC,CAAC,mBAAkB,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACzD,eAAK,AAAC,CAAC,SAAQ,OAAO,CAAC,QAAQ,AAAC,CAAC,UAAS,oBAAoB,AAAC,CAAC,CAC9D,WAAU,CAAG,aAAW,CAC1B,CAAC,CAAC,CAAC;AACH,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,2BAA0B,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACtE,uBAAe,AAAC,CAAC,iBAAgB,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACvD,eAAK,AAAC,CAAC,SAAQ,KAAK,CAAC,QAAQ,AAAC,CAAC,UAAS,oBAAoB,AAAC,CAAC,CAC5D,GAAE,CAAG,IAAE,CACT,CAAC,CAAC,CAAC;AACH,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,6BAA4B,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACxE,uBAAe,AAAC,CAAC,4BAA2B,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAClE,eAAK,AAAC,CAAC,SAAQ,QAAQ,CAAC,QAAQ,AAAC,CAAC,CAAC,UAAS,CAAC,CAAC,CAAC;AAC/C,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,wBAAuB,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACnE,uBAAe,AAAC,CAAC,uBAAsB,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AAC7D,eAAK,AAAC,CAAC,SAAQ,eAAe,CAAC,QAAQ,AAAC,CAAC,CAAC,UAAS,CAAC,CAAC,CAAC;AACtD,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;AAEF,WAAO,AAAC,CAAC,uBAAsB,CAAG,EAAC,AAAD,IAAM;AAEtC,OAAC,AAAC,CAAC,kCAAiC,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC7E,kBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,AAAI,UAAA,CAAA,eAAc,EAAI,CAAA,qBAAoB,AAAC,EAAC,CAAC;AAC7C,AAAI,UAAA,CAAA,iBAAgB,EAAI,CAAA,eAAc,AAAC,EAAC,CAAC;AACzC,AAAI,UAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAAC,CAAC,eAAc,CAAC,CAAG,EAAC,iBAAgB,CAAC,CAAC,CAAC;AACrE,eAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,AAAI,YAAA,CAAA,OAAM,EAAI,CAAA,gBAAe,SAAS,CAAE,CAAA,CAAC,CAAC;AAC1C,eAAK,AAAC,CAAC,OAAM,CAAE,CAAA,CAAC,CAAC,KAAK,AAAC,CAAC,eAAc,CAAC,CAAC;AACxC,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,sCAAqC,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACjF,kBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,AAAI,UAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAAC,CAAC,qBAAoB,AAAC,EAAC,CAAC,CAAG,EAAC,eAAc,AAAC,EAAC,CAAC,CAAC,CAAC;AAC7E,eAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,AAAI,YAAA,CAAA,OAAM,EAAI,CAAA,gBAAe,SAAS,CAAE,CAAA,CAAC,CAAC;AAC1C,eAAK,AAAC,CAAC,OAAM,CAAE,CAAA,CAAC,CAAC,QAAQ,AAAC,CAAC,GAAI,UAAQ,AAAC,CAAC,CACvC,QAAO,CAAG,YAAU,CACtB,CAAC,CAAC,CAAC;AACH,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,oCAAmC,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC/E,kBAAU,YAAY,AAAC,CAAC,aAAY,CAClC,IAAI,SAAO,AAAC,CAAC;AACX,eAAK,CAAG,cAAY;AACpB,mBAAS,CAAG,EAAC,sBAAqB,CAAC;AAAA,QACrC,CAAC,CACH,CAAC;AACD,AAAI,UAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAAC,CAAC,qBAAoB,AAAC,EAAC,CAAC,CAAG,EAAC,eAAc,AAAC,EAAC,CAAC,CAAC,CAAC;AAC7E,eAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,AAAI,YAAA,CAAA,OAAM,EAAI,CAAA,gBAAe,SAAS,CAAE,CAAA,CAAC,CAAC;AAC1C,AAAI,YAAA,CAAA,OAAM,EAAI,CAAA,OAAM,CAAE,CAAA,CAAC,CAAE,CAAA,CAAC,CAAC;AAC3B,eAAK,AAAC,CAAC,OAAM,IAAI,MAAM,CAAC,KAAK,AAAC,CAAC,sBAAqB,CAAC,CAAC;AACtD,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;AAEH,OAAC,AAAC,CAAC,kDAAiD,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC7F,kBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,AAAI,UAAA,CAAA,eAAc,EAAI,CAAA,qBAAoB,AAAC,EAAC,CAAC;AAC7C,AAAI,UAAA,CAAA,iBAAgB,EAAI,CAAA,eAAc,AAAC,EAAC,CAAC;AACzC,AAAI,UAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAAC,CAAC,eAAc,CAAC,CAAG,EAAC,iBAAgB,CAAC,CAAC,CAAC;AACrE,eAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,eAAK,AAAC,CAAC,SAAQ,CAAC,KAAK,AAAC,CAAC,iBAAgB,CAAC,CAAC;AACzC,cAAI,KAAK,AAAC,EAAC,CAAC;QACd,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC;IAEL,CAAC,CAAC;AAEF,KAAC,AAAC,CAAC,iDAAgD,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC5F,gBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,gBAAU,YAAY,AAAC,CAAC,eAAc,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC/E,AAAI,QAAA,CAAA,aAAY,EAAI,CAAA,eAAc,AAAC,CAAC,CAClC,4BAA2B,AAAC,CAAC,MAAK,CAAG,gBAAc,CAAC,CACtD,CAAC,CAAC;AACF,AAAI,QAAA,CAAA,eAAc,EAAI,CAAA,eAAc,AAAC,EAAC,CAAC;AACvC,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAC3B,CAAC,qBAAoB,AAAC,EAAC,CAAG,CAAA,qBAAoB,AAAC,EAAC,CAAC,CACjD,EAAC,aAAY,CAAG,gBAAc,CAAC,CACjC,CAAC;AACD,aAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,aAAK,AAAC,CAAC,SAAQ,CAAC,KAAK,AAAC,CAAC,aAAY,CAAC,CAAC;AACrC,aAAK,AAAC,CAAC,aAAY,eAAe,CAAE,CAAA,CAAC,gBAAgB,CAAC,KAAK,AAAC,CAAC,eAAc,CAAC,CAAC;AAC7E,YAAI,KAAK,AAAC,EAAC,CAAC;MACd,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AAEH,KAAC,AAAC,CAAC,qDAAoD,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAChG,gBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,gBAAU,YAAY,AAAC,CAAC,eAAc,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC/E,AAAI,QAAA,CAAA,aAAY,EAAI,CAAA,eAAc,AAAC,CAAC,CAClC,2BAA0B,AAAC,CAAC,eAAc,AAAC,CAAC,CAC1C,4BAA2B,AAAC,CAAC,MAAK,CAAG,gBAAc,CAAC,CACtD,CAAC,CAAC,CACJ,CAAC,CAAC;AACF,AAAI,QAAA,CAAA,eAAc,EAAI,CAAA,eAAc,AAAC,EAAC,CAAC;AACvC,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAC3B,CAAC,qBAAoB,AAAC,EAAC,CAAG,CAAA,qBAAoB,AAAC,EAAC,CAAC,CACjD,EAAC,aAAY,CAAG,gBAAc,CAAC,CACjC,CAAC;AACD,aAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,aAAK,AAAC,CAAC,SAAQ,CAAC,KAAK,AAAC,CAAC,aAAY,CAAC,CAAC;AACrC,aAAK,AAAC,CACJ,aAAY,eAAe,CAAE,CAAA,CAAC,gBAAgB,eAAe,CAAE,CAAA,CAAC,gBAAgB,CAClF,KAAK,AAAC,CAAC,eAAc,CAAC,CAAC;AACvB,YAAI,KAAK,AAAC,EAAC,CAAC;MACd,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AAEH,KAAC,AAAC,CAAC,kCAAiC,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC7E,gBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,AAAI,QAAA,CAAA,eAAc,EAAI,CAAA,qBAAoB,AAAC,EAAC,CAAC;AAC7C,AAAI,QAAA,CAAA,iBAAgB,EAAI,CAAA,eAAc,AAAC,EAAC,CAAC;AACzC,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAAC,CAAC,eAAc,CAAC,CAAG,EAAC,iBAAgB,CAAC,CAAC,CAAC;AACrE,aAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,aAAK,AAAC,CAAC,SAAQ,CAAC,KAAK,AAAC,CAAC,iBAAgB,CAAC,CAAC;AACzC,aAAO,CAAA,QAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,CAAC;MACxC,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACtB,aAAK,AAAC,CAAC,SAAQ,CAAC,KAAK,AAAC,CAAC,iBAAgB,CAAC,CAAC;AACzC,YAAI,KAAK,AAAC,EAAC,CAAC;MACd,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AAEH,KAAC,AAAC,CAAC,yCAAwC,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AACpF,gBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,AAAI,QAAA,CAAA,wBAAuB,EAAI,CAAA,cAAa,UAAU,AAAC,EAAC,CAAC;AACzD,AAAI,QAAA,CAAA,iBAAgB,EAAI,CAAA,eAAc,AAAC,EAAC,CAAC;AACzC,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAAC,CAAC,wBAAuB,QAAQ,CAAC,CAAG,EAAC,iBAAgB,CAAC,CAAC,CAAC;AACtF,6BAAuB,QAAQ,AAAC,CAAC,qBAAoB,AAAC,EAAC,CAAC,CAAC;AACzD,mBAAa,IAAI,AAAC,CAAC,CACjB,QAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,CAC9B,CAAA,QAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,CAChC,CAAC,KAAK,AAAC,CAAE,CAAC,UAAS,IAAM;AACvB,aAAK,AAAC,CAAC,UAAS,CAAE,CAAA,CAAC,CAAC,KAAK,AAAC,CAAC,iBAAgB,CAAC,CAAC;AAC7C,aAAK,AAAC,CAAC,UAAS,CAAE,CAAA,CAAC,CAAC,KAAK,AAAC,CAAC,iBAAgB,CAAC,CAAC;AAC7C,YAAI,KAAK,AAAC,EAAC,CAAC;MACd,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AAEH,KAAC,AAAC,CAAC,mCAAkC,CAAG,CAAA,MAAK,AAAC,CAAC,CAAC,kBAAiB,CAAC,CAAG,EAAC,KAAI,IAAM;AAC9E,gBAAU,YAAY,AAAC,CAAC,aAAY,CAAG,IAAI,SAAO,AAAC,CAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC,CAAC,CAAC;AAC7E,AAAI,QAAA,CAAA,aAAY,EAAI,CAAA,eAAc,AAAC,CAAC,CAClC,4BAA2B,AAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CACpD,CAAC,CAAC;AACF,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,cAAa,AAAC,CAC3B,CAAC,qBAAoB,AAAC,EAAC,CAAC,CACxB,EAAC,aAAY,CAAC,CAChB,CAAC;AACD,aAAO,QAAQ,AAAC,CAAC,aAAY,CAAC,KAAK,AAAC,CAAE,CAAC,SAAQ,IAAM;AACnD,aAAK,AAAC,CAAC,SAAQ,CAAC,KAAK,AAAC,CAAC,aAAY,CAAC,CAAC;AACrC,aAAK,AAAC,CAAC,aAAY,eAAe,CAAE,CAAA,CAAC,gBAAgB,CAAC,KAAK,AAAC,CAAC,aAAY,CAAC,CAAC;AAC3E,YAAI,KAAK,AAAC,EAAC,CAAC;MACd,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;EACL,CAAC,CAAC;AACJ;AAAA,AAEA,OAAS,gBAAc,CAAE,cAAa,EAAI,KAAG,CAAG;AAC9C,AAAI,IAAA,CAAA,EAAC,EAAI,IAAI,UAAQ,AAAC,CAAC,IAAG,CAAG,KAAG,CAAG,KAAG,CAAG,KAAG,CAAC,CAAC;AAC9C,KAAI,SAAQ,AAAC,CAAC,cAAa,CAAC,CAAG;AAC7B,KAAC,eAAe,EAAI,eAAa,CAAC;EACpC;AAAA,AACA,OAAO,GAAC,CAAC;AACX;AAAA,AAEA,OAAS,6BAA2B,CAAE,MAAK,CAAG,CAAA,IAAG,CAAG;AAClD,AAAI,IAAA,CAAA,IAAG,EAAI,CAAA,MAAK,KAAK,AAAC,CAAC,IAAG,CAAC,CAAC;AAC5B,AAAI,IAAA,CAAA,OAAM,EAAI,CAAA,gBAAe,eAAe,AAAC,CAAC,IAAG,KAAK,CAAG,CAAA,IAAG,WAAW,CAAC,CAAC;AACzE,OAAO,IAAI,cAAY,AAAC,CACtB,CAAA,CAAG,KAAG,CAAG,EAAA,CACT,KAAG,CAAG,QAAM,CACZ,KAAG,CACL,CAAC;AACH;AAAA,AAEA,OAAS,4BAA0B,CAAE,eAAc,CAAG;AACpD,AAAI,IAAA,CAAA,QAAO,EAAI,IAAI,cAAY,AAAC,CAC9B,CAAA,CAAG,KAAG,CAAG,EAAA,CACT,KAAG,CAAG,KAAG,CACT,KAAG,CACL,CAAC;AACD,SAAO,gBAAgB,EAAI,gBAAc,CAAC;AAC1C,OAAO,SAAO,CAAC;AACjB;AAAA,AAEA,OAAS,sBAAoB,CAAE,AAAD,CAAG;AAC/B,OAAO,IAAI,CAAA,SAAQ,UAAU,AAAC,EAAC,CAAC;AAClC;AAAA,AAKA,IAAM,cAAY,GAAG;AA5XrB,KAAK,eAAe,AAAC,8BACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cAwXzB,UAAQ,AAAC,CAAC,CACT,QAAO,CAAG,YAAU,CACtB,CAAC,EA1XgD;EAAC,CAAC,CAAC,CAAC;AA8XrD,IAAM,gBAAc,GAAG;AA/XvB,KAAK,eAAe,AAAC,gCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cA6XzB,UAAQ,AAAC,EAAC,EA7XsC;EAAC,CAAC,CAAC,CAAC;AAgYrD,IAAM,mBAAiB,GAAG;AAG1B,IAAM,8BAA4B,GAAG;AApYrC,KAAK,eAAe,AAAC,8CACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cAkYzB,iBAAe,AAAC,EAAC,EAlY+B;EAAC,CAAC,CAAC,CAAC;AAsYrD,IAAM,sBAAoB,GAAG;AAvY7B,KAAK,eAAe,AAAC,sCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cAqYzB,SAAO,AAAC,EAAC,EArYuC;EAAC,CAAC,CAAC,CAAC;AAyYrD,IAAM,uBAAqB,GAAG;AA1Y9B,KAAK,eAAe,AAAC,uCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cAwYzB,UAAQ,AAAC,EAAC,EAxYsC;EAAC,CAAC,CAAC,CAAC;AA8YrD,IAAM,iCAA+B,GAAG;AA/YxC,KAAK,eAAe,AAAC,iDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cA2YzB,UAAQ,AAAC,CAAC,CACT,eAAc,CAAG,MAAI,CACvB,CAAC,EA7YgD;EAAC,CAAC,CAAC,CAAC;AAmZrD,IAAM,oBAAkB,GAAG;AApZ3B,KAAK,eAAe,AAAC,oCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cAgZzB,UAAQ,AAAC,CAAC,CACT,MAAK,CAAG,EAAC,WAAU,CAAG,aAAW,CAAC,CACpC,CAAC,EAlZgD;EAAC,CAAC,CAAC,CAAC;AAwZrD,IAAM,kBAAgB,GAAG;AAzZzB,KAAK,eAAe,AAAC,kCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cAqZzB,UAAQ,AAAC,CAAC,CACT,IAAG,CAAG,EAAC,GAAE,CAAG,IAAE,CAAC,CACjB,CAAC,EAvZgD;EAAC,CAAC,CAAC,CAAC;AA2ZrD,IAAM,6BAA2B;AAC/B,YAAU,CAAE,AAA4B,QAAO,CAAG,GAAC;AAAA,AACrD;AA9ZA,KAAK,eAAe,AAAC,6CACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cA0ZzB,UAAQ,AAAC,EAAC,EA1ZsC;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,4CACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,eA4ZX,eAAa,AAAC,CAAC,UAAS,CAAC,GA5ZS;EAAC,CAAC,CAAC,CAAC;AAgarD,IAAM,wBAAsB;AAC1B,YAAU,CAAE,AAAuB,QAAO,AAAO,CAAG,GAAC;AAAA,AACvD;AAnaA,KAAK,eAAe,AAAC,wCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cA+ZzB,UAAQ,AAAC,EAAC,EA/ZsC;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,uCACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAD1B,MAAK,KAAgB,YAkaN,UAAQ,AAAC,CAAC,UAAS,CAAC,GAjac;EAAC,CAAC,CAAC,CAAC;AAoarD,IAAM,aAAW,QAAU,CAAA,SAAQ,SAAS;AAI1C,YAAU,CAAE,OAAM,CAAG;AACnB,QAAI,AAAC,EAAC,CAAC;AACP,OAAG,SAAS,EAAI,QAAM,CAAC;AACvB,OAAG,SAAS,EAAI,GAAC,CAAC;EACpB;AAAA,AAEA,QAAM,CAAE,QAAO,AAAmB,CAAgC;AAChE,cAAU,KAAK,AAAC,CAAC,IAAG,SAAS,CAAG,SAAO,CAAC,CAAC;AACzC,SAAO,CAAA,cAAa,QAAQ,AAAC,CAAC,WAAU,SAAS,AAAC,CAAC,IAAG,SAAS,CAAG,EAAA,CAAC,CAAC,CAAC;EACvE;AAAA,AACF;AAnbA,KAAK,eAAe,AAAC,8CACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA8aP,SAAQ,SAAS,GA9aa;EAAC,CAAC,CAAC,CAAC;AAobrD,IAAM,gBAAc,QAAU,YAAU;AACtC,YAAU,CAAE,AAAD,CAAG;AACZ,QAAI,AAAC,EAAC,CAAC;EACT;AAAA,AAEA,QAAM,CAAE,OAAM,AAAQ,CAAG,CAAA,GAAE,AAAQ,CAAW;AAC5C,OAAI,OAAM,IAAM,KAAG,CAAA,EAAK,CAAA,GAAE,GAAK,KAAG,CAAG;AACnC,WAAO,qBAAmB,CAAC;IAC7B;AAAA,AAAC,IAAA;AAED,SAAO,CAAA,OAAM,EAAI,IAAE,CAAC;EACtB;AAAA,AACF;AAjcA,KAAK,eAAe,AAAC,iDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAD1B,MAAK,KAAgB,WAArB,MAAK,KAAgB,UAC4B;EAAC,CAAC,CAAC,CAAC;AAmcrD,IAAM,qBAAmB,QAAU,iBAAe;AAGhD,YAAU,CAAE,AAAD,CAAG;AACZ,QAAI,AAAC,EAAC,CAAC;AACP,OAAG,cAAc,EAAI,CAAA,UAAS,OAAO,AAAC,EAAC,CAAC;EAC1C;AAAA,AAEA,QAAM,CAAE,SAAQ,AAAM,CAAa;AACjC,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,UAAS,IAAI,AAAC,CAAC,IAAG,cAAc,CAAG,UAAQ,CAAC,CAAC;AAC5D,OAAI,OAAM,AAAC,CAAC,QAAO,CAAC,CAAG;AACrB,UAAM,cAAY,CAAC;IACrB;AAAA,AACA,SAAO,SAAO,CAAC;EACjB;AAAA,AAEA,YAAU,CAAE,SAAQ,AAAM,CAAG,CAAA,QAAO,AAAU,CAAG;AAC/C,aAAS,IAAI,AAAC,CAAC,IAAG,cAAc,CAAG,UAAQ,CAAG,SAAO,CAAC,CAAC;EACzD;AAAA,AACF;AAvdA,KAAK,eAAe,AAAC,sDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA2cL,IAAG,GA3cyB;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,0DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAmdD,IAAG,IAAa,QAAO,GAndC;EAAC,CAAC,CAAC,CAAC;AAwdrD,IAAM,qBAAmB,QAAU,iBAAe;AAIhD,YAAU,CAAE,OAAM,CAAG;AACnB,QAAI,AAAC,CAAC,IAAG,CAAG,KAAG,CAAC,CAAC;AACjB,OAAG,SAAS,EAAI,GAAC,CAAC;AAClB,OAAG,SAAS,EAAI,QAAM,CAAC;EACzB;AAAA,AAEA,gBAAc,CAAE,mBAAkB,AAAU,CAAG,CAAA,eAAc,AAAqB,CAAG,CAAA,UAAS,AAAuB,CAAa;AAChI,cAAU,KAAK,AAAC,CAAC,IAAG,SAAS,CAAG,EAAC,mBAAkB,CAAG,gBAAc,CAAG,WAAS,CAAC,CAAC,CAAC;AACnF,SAAO,CAAA,WAAU,SAAS,AAAC,CAAC,IAAG,SAAS,CAAG,EAAA,CAAC,CAAC;EAC/C;AAAA,AACF;AAveA,KAAK,eAAe,AAAC,8DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAkeY,SAAQ,IAAoB,SAAQ,UAAU,IAnepF,MAAK,YAAuB,AAmesE,CAAA,IAAG,CAAE,iBAAe,CAAC,AAnexE,GACE;EAAC,CAAC,CAAC,CAAC;AAserD","file":"/home/korchev/github/angular/modules/angular2/test/core/compiler/compiler_spec.js","sourcesContent":["import {\n  AsyncTestCompleter,\n  beforeEach,\n  xdescribe,\n  ddescribe,\n  describe,\n  el,\n  expect,\n  iit,\n  inject,\n  IS_DARTIUM,\n  it,\n} from 'angular2/test_lib';\n\nimport {List, ListWrapper, Map, MapWrapper, StringMapWrapper} from 'angular2/src/facade/collection';\nimport {Type, isBlank, stringify, isPresent} from 'angular2/src/facade/lang';\nimport {PromiseWrapper, Promise} from 'angular2/src/facade/async';\n\nimport {NewCompiler, CompilerCache} from 'angular2/src/core/compiler/compiler';\nimport {ProtoView} from 'angular2/src/core/compiler/view';\nimport {ElementBinder} from 'angular2/src/core/compiler/element_binder';\nimport {DirectiveMetadataReader} from 'angular2/src/core/compiler/directive_metadata_reader';\nimport {Component, DynamicComponent, Viewport, Decorator} from 'angular2/src/core/annotations/annotations';\nimport {PropertySetter, Attribute} from 'angular2/src/core/annotations/di';\nimport {Template} from 'angular2/src/core/annotations/template';\nimport {DirectiveBinding} from 'angular2/src/core/compiler/element_injector';\nimport {TemplateResolver} from 'angular2/src/core/compiler/template_resolver';\nimport {ComponentUrlMapper, RuntimeComponentUrlMapper} from 'angular2/src/core/compiler/component_url_mapper';\nimport {ProtoViewFactory} from 'angular2/src/core/compiler/proto_view_factory';\n\nimport {UrlResolver} from 'angular2/src/services/url_resolver';\nimport * as renderApi from 'angular2/src/render/api';\n\nexport function main() {\n  describe('compiler', function() {\n    var reader, tplResolver, renderer, protoViewFactory, cmpUrlMapper;\n\n    beforeEach(() => {\n      reader = new DirectiveMetadataReader();\n      tplResolver = new FakeTemplateResolver();\n      cmpUrlMapper = new RuntimeComponentUrlMapper();\n    });\n\n    function createCompiler(renderCompileResults:List, protoViewFactoryResults:List<ProtoView>) {\n      var urlResolver = new FakeUrlResolver();\n      renderer = new FakeRenderer(renderCompileResults);\n      protoViewFactory = new FakeProtoViewFactory(protoViewFactoryResults)\n      return new NewCompiler(\n        reader,\n        new CompilerCache(),\n        tplResolver,\n        cmpUrlMapper,\n        urlResolver,\n        renderer,\n        protoViewFactory\n      );\n    }\n\n    describe('serialize template', () => {\n\n      function captureTemplate(template:Template):Promise<renderApi.Template> {\n        tplResolver.setTemplate(MainComponent, template);\n        var compiler = createCompiler([createRenderProtoView()], [createProtoView()]);\n        return compiler.compile(MainComponent).then( (protoView) => {\n          expect(renderer.requests.length).toBe(1);\n          return renderer.requests[0];\n        });\n      }\n\n      function captureDirective(directive):Promise<renderApi.DirectiveMetadata> {\n        return captureTemplate(new Template({inline: '<div></div>', directives: [directive]})).then( (renderTpl) => {\n          expect(renderTpl.directives.length).toBe(1);\n          return renderTpl.directives[0];\n        });\n      }\n\n      it('should fill the componentId', inject([AsyncTestCompleter], (async) => {\n        captureTemplate(new Template({inline: '<div></div>'})).then( (renderTpl) => {\n          expect(renderTpl.componentId).toEqual(stringify(MainComponent));\n          async.done();\n        });\n      }));\n\n      it('should fill inline', inject([AsyncTestCompleter], (async) => {\n        captureTemplate(new Template({inline: '<div></div>'})).then( (renderTpl) => {\n          expect(renderTpl.inline).toEqual('<div></div>');\n          async.done();\n        });\n      }));\n\n      it('should fill absUrl given inline templates', inject([AsyncTestCompleter], (async) => {\n        cmpUrlMapper.setComponentUrl(MainComponent, '/mainComponent');\n        captureTemplate(new Template({inline: '<div></div>'})).then( (renderTpl) => {\n          expect(renderTpl.absUrl).toEqual('http://www.app.com/mainComponent');\n          async.done();\n        });\n      }));\n\n      it('should fill absUrl given url template', inject([AsyncTestCompleter], (async) => {\n        cmpUrlMapper.setComponentUrl(MainComponent, '/mainComponent');\n        captureTemplate(new Template({url: '/someTemplate'})).then( (renderTpl) => {\n          expect(renderTpl.absUrl).toEqual('http://www.app.com/mainComponent/someTemplate');\n          async.done();\n        });\n      }));\n\n      it('should fill directive.id', inject([AsyncTestCompleter], (async) => {\n        captureDirective(MainComponent).then( (renderDir) => {\n          expect(renderDir.id).toEqual(stringify(MainComponent));\n          async.done();\n        });\n      }));\n\n      it('should fill directive.selector', inject([AsyncTestCompleter], (async) => {\n        captureDirective(MainComponent).then( (renderDir) => {\n          expect(renderDir.selector).toEqual('main-comp');\n          async.done();\n        });\n      }));\n\n      it('should fill directive.type for components', inject([AsyncTestCompleter], (async) => {\n        captureDirective(MainComponent).then( (renderDir) => {\n          expect(renderDir.type).toEqual(renderApi.DirectiveMetadata.COMPONENT_TYPE);\n          async.done();\n        });\n      }));\n\n      it('should fill directive.type for dynamic components', inject([AsyncTestCompleter], (async) => {\n        captureDirective(SomeDynamicComponentDirective).then( (renderDir) => {\n          expect(renderDir.type).toEqual(renderApi.DirectiveMetadata.COMPONENT_TYPE);\n          async.done();\n        });\n      }));\n\n      it('should fill directive.type for viewport directives', inject([AsyncTestCompleter], (async) => {\n        captureDirective(SomeViewportDirective).then( (renderDir) => {\n          expect(renderDir.type).toEqual(renderApi.DirectiveMetadata.VIEWPORT_TYPE);\n          async.done();\n        });\n      }));\n\n      it('should fill directive.type for decorator directives', inject([AsyncTestCompleter], (async) => {\n        captureDirective(SomeDecoratorDirective).then( (renderDir) => {\n          expect(renderDir.type).toEqual(renderApi.DirectiveMetadata.DECORATOR_TYPE);\n          async.done();\n        });\n      }));\n\n      it('should set directive.compileChildren to false for other directives', inject([AsyncTestCompleter], (async) => {\n        captureDirective(MainComponent).then( (renderDir) => {\n          expect(renderDir.compileChildren).toEqual(true);\n          async.done();\n        });\n      }));\n\n      it('should set directive.compileChildren to true for decorator directives', inject([AsyncTestCompleter], (async) => {\n        captureDirective(SomeDecoratorDirective).then( (renderDir) => {\n          expect(renderDir.compileChildren).toEqual(true);\n          async.done();\n        });\n      }));\n\n      it('should set directive.compileChildren to false for decorator directives', inject([AsyncTestCompleter], (async) => {\n        captureDirective(IgnoreChildrenDecoratorDirective).then( (renderDir) => {\n          expect(renderDir.compileChildren).toEqual(false);\n          async.done();\n        });\n      }));\n\n      it('should set directive.events', inject([AsyncTestCompleter], (async) => {\n        captureDirective(DirectiveWithEvents).then( (renderDir) => {\n          expect(renderDir.events).toEqual(MapWrapper.createFromStringMap({\n            'someEvent': 'someAction'\n          }));\n          async.done();\n        });\n      }));\n\n      it('should set directive.bind', inject([AsyncTestCompleter], (async) => {\n        captureDirective(DirectiveWithBind).then( (renderDir) => {\n          expect(renderDir.bind).toEqual(MapWrapper.createFromStringMap({\n            'a': 'b'\n          }));\n          async.done();\n        });\n      }));\n\n      it('should read @PropertySetter', inject([AsyncTestCompleter], (async) => {\n        captureDirective(DirectiveWithPropertySetters).then( (renderDir) => {\n          expect(renderDir.setters).toEqual(['someProp']);\n          async.done();\n        });\n      }));\n\n      it('should read @Attribute', inject([AsyncTestCompleter], (async) => {\n        captureDirective(DirectiveWithAttributes).then( (renderDir) => {\n          expect(renderDir.readAttributes).toEqual(['someAttr']);\n          async.done();\n        });\n      }));\n    });\n\n    describe('call ProtoViewFactory', () => {\n\n      it('should pass the render protoView', inject([AsyncTestCompleter], (async) => {\n        tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n        var renderProtoView = createRenderProtoView();\n        var expectedProtoView = createProtoView();\n        var compiler = createCompiler([renderProtoView], [expectedProtoView]);\n        compiler.compile(MainComponent).then( (protoView) => {\n          var request = protoViewFactory.requests[0];\n          expect(request[1]).toBe(renderProtoView);\n          async.done();\n        });\n      }));\n\n      it('should pass the component annotation', inject([AsyncTestCompleter], (async) => {\n        tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n        var compiler = createCompiler([createRenderProtoView()], [createProtoView()]);\n        compiler.compile(MainComponent).then( (protoView) => {\n          var request = protoViewFactory.requests[0];\n          expect(request[0]).toEqual(new Component({\n            selector: 'main-comp'\n          }));\n          async.done();\n        });\n      }));\n\n      it('should pass the directive bindings', inject([AsyncTestCompleter], (async) => {\n        tplResolver.setTemplate(MainComponent,\n          new Template({\n            inline: '<div></div>',\n            directives: [SomeDecoratorDirective]\n          })\n        );\n        var compiler = createCompiler([createRenderProtoView()], [createProtoView()]);\n        compiler.compile(MainComponent).then( (protoView) => {\n          var request = protoViewFactory.requests[0];\n          var binding = request[2][0];\n          expect(binding.key.token).toBe(SomeDecoratorDirective);\n          async.done();\n        });\n      }));\n\n      it('should use the protoView of the ProtoViewFactory', inject([AsyncTestCompleter], (async) => {\n        tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n        var renderProtoView = createRenderProtoView();\n        var expectedProtoView = createProtoView();\n        var compiler = createCompiler([renderProtoView], [expectedProtoView]);\n        compiler.compile(MainComponent).then( (protoView) => {\n          expect(protoView).toBe(expectedProtoView);\n          async.done();\n        });\n      }));\n\n    });\n\n    it('should load nested components in root ProtoView', inject([AsyncTestCompleter], (async) => {\n      tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n      tplResolver.setTemplate(NestedComponent, new Template({inline: '<div></div>'}));\n      var mainProtoView = createProtoView([\n        createComponentElementBinder(reader, NestedComponent)\n      ]);\n      var nestedProtoView = createProtoView();\n      var compiler = createCompiler(\n        [createRenderProtoView(), createRenderProtoView()],\n        [mainProtoView, nestedProtoView]\n      );\n      compiler.compile(MainComponent).then( (protoView) => {\n        expect(protoView).toBe(mainProtoView);\n        expect(mainProtoView.elementBinders[0].nestedProtoView).toBe(nestedProtoView);\n        async.done();\n      });\n    }));\n\n    it('should load nested components in viewport ProtoView', inject([AsyncTestCompleter], (async) => {\n      tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n      tplResolver.setTemplate(NestedComponent, new Template({inline: '<div></div>'}));\n      var mainProtoView = createProtoView([\n        createViewportElementBinder(createProtoView([\n          createComponentElementBinder(reader, NestedComponent)\n        ]))\n      ]);\n      var nestedProtoView = createProtoView();\n      var compiler = createCompiler(\n        [createRenderProtoView(), createRenderProtoView()],\n        [mainProtoView, nestedProtoView]\n      );\n      compiler.compile(MainComponent).then( (protoView) => {\n        expect(protoView).toBe(mainProtoView);\n        expect(\n          mainProtoView.elementBinders[0].nestedProtoView.elementBinders[0].nestedProtoView\n        ).toBe(nestedProtoView);\n        async.done();\n      });\n    }));\n\n    it('should cache compiled components', inject([AsyncTestCompleter], (async) => {\n      tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n      var renderProtoView = createRenderProtoView();\n      var expectedProtoView = createProtoView();\n      var compiler = createCompiler([renderProtoView], [expectedProtoView]);\n      compiler.compile(MainComponent).then( (protoView) => {\n        expect(protoView).toBe(expectedProtoView);\n        return compiler.compile(MainComponent);\n      }).then( (protoView) => {\n        expect(protoView).toBe(expectedProtoView);\n        async.done();\n      });\n    }));\n\n    it('should re-use components being compiled', inject([AsyncTestCompleter], (async) => {\n      tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n      var renderProtoViewCompleter = PromiseWrapper.completer();\n      var expectedProtoView = createProtoView();\n      var compiler = createCompiler([renderProtoViewCompleter.promise], [expectedProtoView]);\n      renderProtoViewCompleter.resolve(createRenderProtoView());\n      PromiseWrapper.all([\n        compiler.compile(MainComponent),\n        compiler.compile(MainComponent)\n      ]).then( (protoViews) => {\n        expect(protoViews[0]).toBe(expectedProtoView);\n        expect(protoViews[1]).toBe(expectedProtoView);\n        async.done();\n      });\n    }));\n\n    it('should allow recursive components', inject([AsyncTestCompleter], (async) => {\n      tplResolver.setTemplate(MainComponent, new Template({inline: '<div></div>'}));\n      var mainProtoView = createProtoView([\n        createComponentElementBinder(reader, MainComponent)\n      ]);\n      var compiler = createCompiler(\n        [createRenderProtoView()],\n        [mainProtoView]\n      );\n      compiler.compile(MainComponent).then( (protoView) => {\n        expect(protoView).toBe(mainProtoView);\n        expect(mainProtoView.elementBinders[0].nestedProtoView).toBe(mainProtoView);\n        async.done();\n      });\n    }));\n  });\n}\n\nfunction createProtoView(elementBinders = null) {\n  var pv = new ProtoView(null, null, null, null);\n  if (isPresent(elementBinders)) {\n    pv.elementBinders = elementBinders;\n  }\n  return pv;\n}\n\nfunction createComponentElementBinder(reader, type) {\n  var meta = reader.read(type);\n  var binding = DirectiveBinding.createFromType(meta.type, meta.annotation);\n  return new ElementBinder(\n    0, null, 0,\n    null, binding,\n    null\n  );\n}\n\nfunction createViewportElementBinder(nestedProtoView) {\n  var elBinder = new ElementBinder(\n    0, null, 0,\n    null, null,\n    null\n  );\n  elBinder.nestedProtoView = nestedProtoView;\n  return elBinder;\n}\n\nfunction createRenderProtoView() {\n  return new renderApi.ProtoView();\n}\n\n@Component({\n  selector: 'main-comp'\n})\nclass MainComponent {}\n\n@Component()\nclass NestedComponent {}\n\nclass RecursiveComponent {}\n\n@DynamicComponent()\nclass SomeDynamicComponentDirective {}\n\n@Viewport()\nclass SomeViewportDirective {}\n\n@Decorator()\nclass SomeDecoratorDirective {}\n\n@Decorator({\n  compileChildren: false\n})\nclass IgnoreChildrenDecoratorDirective {}\n\n@Decorator({\n  events: {'someEvent': 'someAction'}\n})\nclass DirectiveWithEvents {}\n\n@Decorator({\n  bind: {'a': 'b'}\n})\nclass DirectiveWithBind {}\n\n@Decorator()\nclass DirectiveWithPropertySetters {\n  constructor(@PropertySetter('someProp') someProp) {}\n}\n\n@Decorator()\nclass DirectiveWithAttributes {\n  constructor(@Attribute('someAttr') someAttr:string) {}\n}\n\nclass FakeRenderer extends renderApi.Renderer {\n  requests:List<renderApi.Template>;\n  _results:List;\n\n  constructor(results) {\n    super();\n    this._results = results;\n    this.requests = [];\n  }\n\n  compile(template:renderApi.Template):Promise<renderApi.ProtoView> {\n    ListWrapper.push(this.requests, template);\n    return PromiseWrapper.resolve(ListWrapper.removeAt(this._results, 0));\n  }\n}\n\nclass FakeUrlResolver extends UrlResolver {\n  constructor() {\n    super();\n  }\n\n  resolve(baseUrl: string, url: string): string {\n    if (baseUrl === null && url == './') {\n      return 'http://www.app.com';\n    };\n\n    return baseUrl + url;\n  }\n}\n\n\nclass FakeTemplateResolver extends TemplateResolver {\n  _cmpTemplates: Map;\n\n  constructor() {\n    super();\n    this._cmpTemplates = MapWrapper.create();\n  }\n\n  resolve(component: Type): Template {\n    var template = MapWrapper.get(this._cmpTemplates, component);\n    if (isBlank(template)) {\n      throw 'No template';\n    }\n    return template;\n  }\n\n  setTemplate(component: Type, template: Template) {\n    MapWrapper.set(this._cmpTemplates, component, template);\n  }\n}\n\nclass FakeProtoViewFactory extends ProtoViewFactory {\n  requests:List;\n  _results:List;\n\n  constructor(results) {\n    super(null, null);\n    this.requests = [];\n    this._results = results;\n  }\n\n  createProtoView(componentAnnotation:Component, renderProtoView: renderApi.ProtoView, directives:List<DirectiveBinding>):ProtoView {\n    ListWrapper.push(this.requests, [componentAnnotation, renderProtoView, directives]);\n    return ListWrapper.removeAt(this._results, 0);\n  }\n}"]}